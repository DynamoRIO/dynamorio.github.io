---
title: "dynamorio::drmemtrace::decode_cache_base_t Class Reference"
layout: default
permalink: /classdynamorio_1_1drmemtrace_1_1decode__cache__base__t.html
---
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DynamoRIO
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacedynamorio.html">dynamorio</a></li><li class="navelem"><a class="el" href="namespacedynamorio_1_1drmemtrace.html">drmemtrace</a></li><li class="navelem"><a class="el" href="classdynamorio_1_1drmemtrace_1_1decode__cache__base__t.html">decode_cache_base_t</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">dynamorio::drmemtrace::decode_cache_base_t Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;decode_cache.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for dynamorio::drmemtrace::decode_cache_base_t:</div>
<div class="dyncontent">
 <div class="center">
  <img src="/images/classdynamorio_1_1drmemtrace_1_1decode__cache__base__t.png" usemap="#dynamorio::drmemtrace::decode_5Fcache_5Fbase_5Ft_map" alt=""/>
  <map id="dynamorio::drmemtrace::decode_5Fcache_5Fbase_5Ft_map" name="dynamorio::drmemtrace::decode_5Fcache_5Fbase_5Ft_map">
<area href="classdynamorio_1_1drmemtrace_1_1decode__cache__t.html" alt="dynamorio::drmemtrace::decode_cache_t&lt; DecodeInfo &gt;" shape="rect" coords="0,56,358,80"/>
<area href="classdynamorio_1_1drmemtrace_1_1test__decode__cache__t.html" alt="dynamorio::drmemtrace::test_decode_cache_t&lt; DecodeInfo &gt;" shape="rect" coords="0,112,358,136"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:abe7ec78e79df5f0716429591d91506bf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdynamorio_1_1drmemtrace_1_1decode__cache__base__t.html#abe7ec78e79df5f0716429591d91506bf">decode_cache_base_t</a> (unsigned int verbosity)</td></tr>
<tr class="separator:abe7ec78e79df5f0716429591d91506bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58ee9f16c149ed8cb946c7ec6cfcf74c"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdynamorio_1_1drmemtrace_1_1decode__cache__base__t.html#a58ee9f16c149ed8cb946c7ec6cfcf74c">init_module_mapper</a> (const std::string &amp;module_file_path, const std::string &amp;alt_module_dir)</td></tr>
<tr class="separator:a58ee9f16c149ed8cb946c7ec6cfcf74c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92aac41d9c88a4a3b87b66c9df08feec"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdynamorio_1_1drmemtrace_1_1decode__cache__base__t.html#a92aac41d9c88a4a3b87b66c9df08feec">find_mapped_trace_address</a> (app_pc trace_pc, app_pc &amp;decode_pc)</td></tr>
<tr class="separator:a92aac41d9c88a4a3b87b66c9df08feec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a130be16f5977673dd841f073821366"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacedynamorio_1_1drmemtrace.html#a017717a4b9ef5ae1f6d1fef1df834baa">offline_file_type_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdynamorio_1_1drmemtrace_1_1decode__cache__base__t.html#a2a130be16f5977673dd841f073821366">build_arch_file_type</a> ()</td></tr>
<tr class="separator:a2a130be16f5977673dd841f073821366"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:abe0355194b56d18227d39e0311ec14b9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdynamorio_1_1drmemtrace_1_1decode__cache__base__t.html#abe0355194b56d18227d39e0311ec14b9">use_module_mapper_</a> = false</td></tr>
<tr class="separator:abe0355194b56d18227d39e0311ec14b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a646ef92272fa7a6abeb515190389afb2"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdynamorio_1_1drmemtrace_1_1decode__cache__base__t.html#a646ef92272fa7a6abeb515190389afb2">verbosity_</a> = 0</td></tr>
<tr class="separator:a646ef92272fa7a6abeb515190389afb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a6f4aeba05f4f872485b34f152a8891ad"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdynamorio_1_1drmemtrace_1_1decode__cache__base__t.html#a6f4aeba05f4f872485b34f152a8891ad">make_module_mapper</a> (const std::string &amp;module_file_path, const std::string &amp;alt_module_dir)</td></tr>
<tr class="separator:a6f4aeba05f4f872485b34f152a8891ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Base class for <a class="el" href="classdynamorio_1_1drmemtrace_1_1decode__cache__t.html">dynamorio::drmemtrace::decode_cache_t</a>.</p>
<p>This is used to allow sharing the static data members among all template instances of <a class="el" href="classdynamorio_1_1drmemtrace_1_1decode__cache__t.html">dynamorio::drmemtrace::decode_cache_t</a>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="abe7ec78e79df5f0716429591d91506bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe7ec78e79df5f0716429591d91506bf">&#9670;&nbsp;</a></span>decode_cache_base_t()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dynamorio::drmemtrace::decode_cache_base_t::decode_cache_base_t </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>verbosity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructor for the base class, intentionally declared as protected so <a class="el" href="classdynamorio_1_1drmemtrace_1_1decode__cache__base__t.html#abe7ec78e79df5f0716429591d91506bf">decode_cache_base_t</a> cannot be instantiated directly but only via a derived class. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2a130be16f5977673dd841f073821366"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a130be16f5977673dd841f073821366">&#9670;&nbsp;</a></span>build_arch_file_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedynamorio_1_1drmemtrace.html#a017717a4b9ef5ae1f6d1fef1df834baa">offline_file_type_t</a> dynamorio::drmemtrace::decode_cache_base_t::build_arch_file_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the <a class="el" href="namespacedynamorio_1_1drmemtrace.html#a017717a4b9ef5ae1f6d1fef1df834baa">dynamorio::drmemtrace::offline_file_type_t</a> arch bit that corresponds to the current build environment. </p>

</div>
</div>
<a id="a92aac41d9c88a4a3b87b66c9df08feec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92aac41d9c88a4a3b87b66c9df08feec">&#9670;&nbsp;</a></span>find_mapped_trace_address()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string dynamorio::drmemtrace::decode_cache_base_t::find_mapped_trace_address </td>
          <td>(</td>
          <td class="paramtype">app_pc&#160;</td>
          <td class="paramname"><em>trace_pc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">app_pc &amp;&#160;</td>
          <td class="paramname"><em>decode_pc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns in the <code>decode_pc</code> reference parameter the address where the encoding for the instruction at <code>trace_pc</code> can be found.</p>
<p>Returns the empty string on success, or an error message. </p>

</div>
</div>
<a id="a58ee9f16c149ed8cb946c7ec6cfcf74c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58ee9f16c149ed8cb946c7ec6cfcf74c">&#9670;&nbsp;</a></span>init_module_mapper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string dynamorio::drmemtrace::decode_cache_base_t::init_module_mapper </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>module_file_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>alt_module_dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initializes the module_mapper_ object using <a class="el" href="classdynamorio_1_1drmemtrace_1_1decode__cache__base__t.html#a6f4aeba05f4f872485b34f152a8891ad">make_module_mapper()</a> and performs other bookkeeping and prerequisites.</p>
<p>Returns the empty string on success, or an error message. </p>

</div>
</div>
<a id="a6f4aeba05f4f872485b34f152a8891ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f4aeba05f4f872485b34f152a8891ad">&#9670;&nbsp;</a></span>make_module_mapper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string dynamorio::drmemtrace::decode_cache_base_t::make_module_mapper </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>module_file_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>alt_module_dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates a <a class="el" href="classdynamorio_1_1drmemtrace_1_1module__mapper__t.html">module_mapper_t</a>. This does not need to worry about races as the module_mapper_mutex_ will be acquired before calling.</p>
<p>Non-static to allow sub-classes to override. This is guaranteed to be invoked only when the count of existing <a class="el" href="classdynamorio_1_1drmemtrace_1_1decode__cache__t.html">dynamorio::drmemtrace::decode_cache_t</a> instances that are initialized with a non-empty module_file_path is zero.</p>
<p>Returns the empty string on success, or an error message. </p>

<p>Reimplemented in <a class="el" href="classdynamorio_1_1drmemtrace_1_1test__decode__cache__t.html#a9f85f5075cfcc5e0d9a79d5a27791d41">dynamorio::drmemtrace::test_decode_cache_t&lt; DecodeInfo &gt;</a>.</p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a id="abe0355194b56d18227d39e0311ec14b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe0355194b56d18227d39e0311ec14b9">&#9670;&nbsp;</a></span>use_module_mapper_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool dynamorio::drmemtrace::decode_cache_base_t::use_module_mapper_ = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>use_module_mapper_ describes whether we lookup the instr encodings from the module map, or alternatively from embedded-encodings in the trace.</p>
<p>Note that we store our instr encoding lookup strategy as a non-static data member, unlike <a class="el" href="classdynamorio_1_1drmemtrace_1_1module__mapper__t.html">module_mapper_t</a> which is static and shared between all <a class="el" href="classdynamorio_1_1drmemtrace_1_1decode__cache__t.html">dynamorio::drmemtrace::decode_cache_t</a> instances (even of different template types). Some analysis tools may deliberately want to look at instr encodings from the module mappings, but that strategy does not provide JIT encodings which are present only as embedded-encodings in the trace. In such a case, other concurrently running analysis tools should still be able to see encodings for JIT code. </p>

</div>
</div>
<a id="a646ef92272fa7a6abeb515190389afb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a646ef92272fa7a6abeb515190389afb2">&#9670;&nbsp;</a></span>verbosity_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int dynamorio::drmemtrace::decode_cache_base_t::verbosity_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Verbosity level for logs. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/runner/work/dynamorio/dynamorio/build_release-64/clients/include/drmemtrace/decode_cache.h</li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<!--BEGIN GENERATE_TREEVIEW-->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer" style="float:none;text-align:center"><img border=0 src="favicon.png"> &nbsp;  DynamoRIO version 11.90.20391 --- Fri Oct 31 2025 03:26:33 &nbsp; <img border=0 src="favicon.png">
</small></address>
